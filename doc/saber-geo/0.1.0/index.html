<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    
    
    <title>saber</title>
    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="format-detection" content="telephone=no, email=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    
    <link rel="icon" href="/saber/favicon.png">
    <link rel="stylesheet" href="/saber/css/master.css" type="text/css">


    <script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement('script');
        hm.src = '//hm.baidu.com/hm.js?a12dc3a09e80cd9a547dcefbce88b88d';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(hm, s);
    })();
    </script>
</head>

    <body class="doc">
        <header>
    <div class="topbar">
        <h1 class="logo"><a href="/saber/">saber</a></h1>
        <nav class="menu">
            <ul>
                
                
                <li><a href="/saber/">首页</a></li>
                
                
                <li><a href="/saber/feature">特性</a></li>
                
                
                <li><a href="/saber/doc" class="active">文档</a></li>
                
                
                <li><a href="/saber/download">下载</a></li>
                
                
                <li><a href="https://github.com/ecomfe/saber" target="_blank">GitHub</a></li>
                
            </ul>
        </nav>
    </div>
</header>

        <script>
window.DOC_DATA = [{"name":"rider","versions":[{"name":"0.1.0"},{"name":"0.1.1"},{"name":"0.2.0"},{"name":"0.2.1"},{"name":"0.3.0"},{"name":"0.3.1"},{"name":"0.3.2","files":["api.md","code-style.md","connect.md","demo-and-ut.md","faq.md"]},{"name":"0.3.3","files":["api.md","code-style.md","connect.md","demo-and-ut.md","faq.md"]},{"name":"0.3.4","files":["api.md","code-style.md","connect.md","demo-and-ut.md","faq.md"]},{"name":"0.4.0","files":["api.md","code-style.md","connect.md","demo-and-ut.md","faq.md"]},{"name":"0.4.2","files":["api.md","code-style.md","connect.md","demo-and-ut.md","faq.md"]},{"name":"0.4.3","files":["api.md","code-style.md","connect.md","demo-and-ut.md","faq.md"]}]},{"name":"saber-ajax","versions":[{"name":"0.1.0"},{"name":"0.1.1-beta.1"},{"name":"0.1.2"},{"name":"0.1.3"},{"name":"0.1.4"},{"name":"0.1.5"},{"name":"0.1.6"}]},{"name":"saber-cookie","versions":[{"name":"0.1.0"},{"name":"0.1.1"},{"name":"0.1.2"},{"name":"0.1.3"},{"name":"0.1.4"},{"name":"0.1.5"},{"name":"1.0.0"}]},{"name":"saber-dom","versions":[{"name":"0.1.0"},{"name":"0.2.0"},{"name":"0.3.0"},{"name":"0.3.1"},{"name":"0.4.0"},{"name":"0.4.1"}]},{"name":"saber-emitter","versions":[{"name":"0.1.0"},{"name":"0.2.0"},{"name":"0.3.0"},{"name":"0.3.1"},{"name":"0.4.0"},{"name":"0.5.0"},{"name":"1.0.0"}]},{"name":"saber-env","versions":[{"name":"0.0.1-beta.1"},{"name":"0.2.0"},{"name":"0.3.0"},{"name":"0.4.0"},{"name":"0.4.1"},{"name":"0.4.2"},{"name":"0.4.3"}]},{"name":"saber-fastbutton","versions":[{"name":"0.1.0"},{"name":"0.2.0"},{"name":"1.0.0"}]},{"name":"saber-firework","versions":[{"name":"0.1.0-beta.1"},{"name":"0.1.0-beta.3"},{"name":"0.1.0-beta.4"},{"name":"0.2.0"},{"name":"0.2.1"},{"name":"0.2.4","files":["action.md","config.md","faq.md","guide.md","model.md","route.md","view.md"]},{"name":"0.2.5","files":["action.md","config.md","faq.md","guide.md","model.md","route.md","view.md"]},{"name":"0.2.6","files":["action.md","config.md","faq.md","guide.md","model.md","route.md","view.md"]},{"name":"0.3.0","files":["action.md","config.md","faq.md","guide.md","model.md","route.md","view.md"]},{"name":"0.3.1","files":["action.md","config.md","faq.md","guide.md","model.md","route.md","view.md"]},{"name":"0.3.2","files":["action.md","config.md","faq.md","guide.md","model.md","route.md","view.md"]},{"name":"0.4.0","files":["action.md","config.md","faq.md","guide.md","model.md","route.md","view.md"]},{"name":"0.4.1","files":["action.md","config.md","faq.md","guide.md","model.md","route.md","view.md"]},{"name":"0.4.2","files":["action.md","config.md","faq.md","guide.md","model.md","route.md","view.md"]}]},{"name":"saber-geo","versions":[{"name":"0.1.0"}]},{"name":"saber-lang","versions":[{"name":"0.1.0"},{"name":"0.1.1"},{"name":"0.2.0"},{"name":"0.3.0"},{"name":"0.3.1"},{"name":"0.4.0"},{"name":"1.0.0","files":["function.md","type.md"]}]},{"name":"saber-log","versions":[{"name":"0.1.0"}]},{"name":"saber-matchmedia","versions":[{"name":"0.1.0"},{"name":"1.0.0"}]},{"name":"saber-promise","versions":[{"name":"0.1.0"},{"name":"0.1.1"},{"name":"0.1.2-beta.1"},{"name":"0.1.2-beta.2"},{"name":"0.1.2-beta.3"},{"name":"0.1.2"},{"name":"1.0.0","files":["promise.md","resolver.md"]}]},{"name":"saber-router","versions":[{"name":"0.1.0-beta.1"},{"name":"0.1.0-beta.2"},{"name":"0.1.0-beta.3"},{"name":"0.1.0-beta.4"},{"name":"0.1.0-beta.5"},{"name":"0.1.0"},{"name":"0.2.0"},{"name":"0.2.1"},{"name":"0.2.2"},{"name":"0.2.3"},{"name":"0.2.4"}]},{"name":"saber-run","versions":[{"name":"0.1.0"},{"name":"0.2.0"}]},{"name":"saber-scroll","versions":[{"name":"0.1.0"},{"name":"0.1.1-beta.1"},{"name":"0.1.2","files":["plugin"]},{"name":"0.1.3","files":["plugin"]},{"name":"0.1.4","files":["plugin"]}]},{"name":"saber-storage","versions":[{"name":"0.1.0"},{"name":"0.1.1"}]},{"name":"saber-string","versions":[{"name":"0.1.1"},{"name":"0.2.0-0"},{"name":"0.2.0"},{"name":"0.3.0"},{"name":"1.0.0"}]},{"name":"saber-tap","versions":[{"name":"0.1.0-0"},{"name":"0.1.0-1"},{"name":"0.1.0-2"},{"name":"0.1.0-3"},{"name":"0.1.0-4"},{"name":"0.1.0"},{"name":"0.1.1"},{"name":"0.1.2"}]},{"name":"saber-uri","versions":[{"name":"0.1.0"},{"name":"0.1.1"},{"name":"0.1.2"},{"name":"0.1.3"}]},{"name":"saber-viewport","versions":[{"name":"0.1.0"},{"name":"0.2.0"},{"name":"0.2.1-beta.1"},{"name":"0.2.1-beta.2"},{"name":"0.2.1-beta.3"},{"name":"0.2.1-beta.4"},{"name":"0.2.1-beta.5"},{"name":"0.2.1-beta.6"},{"name":"0.2.1-beta.7"},{"name":"0.2.5"},{"name":"0.2.6"},{"name":"0.2.8"},{"name":"0.2.9"},{"name":"0.2.10"},{"name":"0.2.11"},{"name":"0.2.12"}]},{"name":"saber-widget","versions":[{"name":"0.1.0","files":["api-main.md","api-slider.md","api-widget.md"]},{"name":"0.1.1","files":["api-main.md","api-slider.md","api-widget.md"]},{"name":"0.2.0","files":["api-main.md","api-plugin-masker.md","api-plugin-sliderflex.md","api-plugin-zoom.md","api-plugin.md","api-widget-imageview.md","api-widget-lazyload.md","api-widget-slider.md","api-widget-suggestion.md","api-widget.md"]},{"name":"0.2.1","files":["api-main.md","api-plugin-masker.md","api-plugin-sliderflex.md","api-plugin-zoom.md","api-plugin.md","api-widget-imageview.md","api-widget-lazyload.md","api-widget-slider.md","api-widget-suggestion.md","api-widget.md"]},{"name":"0.2.2","files":["api-main.md","api-plugin-masker.md","api-plugin-sliderflex.md","api-plugin-zoom.md","api-plugin.md","api-widget-imageview.md","api-widget-lazyload.md","api-widget-slider.md","api-widget-suggestion.md","api-widget.md"]},{"name":"0.2.3","files":["api-main.md","api-plugin-imageviewflex.md","api-plugin-masker.md","api-plugin-sliderflex.md","api-plugin.md","api-widget-imageview.md","api-widget-lazyload.md","api-widget-slider.md","api-widget-suggestion.md","api-widget.md"]},{"name":"0.3.0","files":["api-main.md","api-plugin-imageviewflex.md","api-plugin-masker.md","api-plugin-sliderflex.md","api-plugin.md","api-widget-imageview.md","api-widget-lazyload.md","api-widget-radiogroup.md","api-widget-slider.md","api-widget-suggestion.md","api-widget.md"]},{"name":"0.3.1","files":["api-main.md","api-plugin-imageviewflex.md","api-plugin-masker.md","api-plugin-sliderflex.md","api-plugin.md","api-widget-imageview.md","api-widget-lazyload.md","api-widget-radiogroup.md","api-widget-slider.md","api-widget-suggestion.md","api-widget.md"]},{"name":"0.3.2","files":["api-main.md","api-plugin-imageviewflex.md","api-plugin-masker.md","api-plugin-sliderflex.md","api-plugin.md","api-widget-imageview.md","api-widget-lazyload.md","api-widget-radiogroup.md","api-widget-slider.md","api-widget-suggestion.md","api-widget.md"]}]}];
</script>

<main>
    <aside id="doc-menu" data-repo="saber-geo" data-version="0.1.0"></aside>
    <article>
    

    <h1 id="saber-geo_">saber-geo <a href="https://travis-ci.org/ecomfe/saber-geo" target="_blank" rel="external"><img src="https://travis-ci.org/ecomfe/saber-geo.png" alt="Build Status"></a></h1>
<p>适合移动端的 GeoLocation 封装</p>
<h2 id="Usage">Usage</h2>
<p>通过<code>edp</code>引入模块：</p>
<pre><code>edp <span class="preprocessor"><span class="keyword">import</span> saber-geo</span>
</code></pre><p>简单使用示例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">require</span>( [ <span class="string">'saber-geo'</span> ], <span class="function"><span class="keyword">function</span><span class="params">( Geo )</span> </span>{</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">onSuccess</span><span class="params">( position )</span> </span>{</div><div class="line">    	<span class="keyword">var</span> coords = position.coords;</div><div class="line">       	<span class="built_in">console</span>.log( <span class="string">'latitude,longitude: '</span>, coords.latitude, coords.longitude);</div><div class="line">    }</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">onError</span><span class="params">( error )</span> </span>{</div><div class="line">    	<span class="built_in">console</span>.log( <span class="string">'Error: '</span>, error.code, error.message );</div><div class="line">    }</div><div class="line">	</div><div class="line">	<span class="comment">// 一次性获取</span></div><div class="line">	Geo.get( onSuccess, onError );</div><div class="line">    </div><div class="line">    <span class="comment">// 持续性获取</span></div><div class="line">    <span class="keyword">var</span> watchId = Geo.watch( onSuccess, onError );</div><div class="line">    </div><div class="line">    <span class="comment">// 停止获取</span></div><div class="line">    Geo.clear( watchId );</div><div class="line"></div><div class="line">});</div></pre></td></tr></table></figure>

<h2 id="API">API</h2>
<h3 id="Base">Base</h3>
<p><code>Base</code> 部分是标准的 <a href="http://www.w3.org/TR/geolocation-API" target="_blank" rel="external">HTML5 Geolocation API</a> 封装，在 <code>require( &#39;saber-geo&#39; )</code> 时加载。</p>
<h4 id="-get(_onSuccess[,_onError,_options]_)">.get( onSuccess[, onError, options] )</h4>
<p><code>一次性</code>获取当前<code>地理位置信息</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">Geo.get(</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="params">( position )</span> </span>{</div><div class="line">    	<span class="built_in">console</span>.info( <span class="string">'Position: '</span>, position );</div><div class="line">	},</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="params">( error )</span> </span>{</div><div class="line">		<span class="built_in">console</span>.error( <span class="string">'Error: '</span>, error );</div><div class="line">	}</div><div class="line">);</div></pre></td></tr></table></figure>

<ul>
<li><code>onSuccess</code> <code>{Function}</code> 成功回调，参数参考<a href="http://www.w3.org/TR/geolocation-API/#position_interface" target="_blank" rel="external"><code>Position</code></a></li>
<li><code>onError</code> <code>{Function=}</code> 错误回调，参数参考<a href="http://www.w3.org/TR/geolocation-API/#position_error_interface" target="_blank" rel="external"><code>PositionError</code></a></li>
<li><code>options</code> <code>{Object=}</code> 配置对象<ul>
<li><code>highAcuracy</code> <code>{boolean=}</code> 是否使用高精度</li>
<li><code>timeout</code> <code>{number=}</code> 超时时长,单位毫秒</li>
<li><code>age</code> <code>{number=}</code> 数据缓存时间,单位毫秒,为<code>0</code>时每次都执行新的检索</li>
</ul>
</li>
</ul>
<h4 id="-watch(_onSuccess[,_onError,_options]_)">.watch( onSuccess[, onError, options] )</h4>
<p><code>持续性</code>获取当前<code>地理位置信息</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">Geo.watch(</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="params">( position )</span> </span>{</div><div class="line">    	<span class="built_in">console</span>.info( <span class="string">'Position: '</span>, position );</div><div class="line">	},</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="params">( error )</span> </span>{</div><div class="line">		<span class="built_in">console</span>.error( <span class="string">'Error: '</span>, error );</div><div class="line">	},</div><div class="line">	{ timeout: <span class="number">20000</span>, age: <span class="number">10000</span> }</div><div class="line">);</div></pre></td></tr></table></figure>

<ul>
<li><code>onSuccess</code> <code>{Function}</code> 成功回调，参数参考<a href="http://www.w3.org/TR/geolocation-API/#position_interface" target="_blank" rel="external"><code>Position</code></a></li>
<li><code>onError</code> <code>{Function=}</code> 错误回调，参数参考<a href="http://www.w3.org/TR/geolocation-API/#position_error_interface" target="_blank" rel="external"><code>PositionError</code></a></li>
<li><code>options</code> <code>{Object=}</code> 配置对象<ul>
<li><code>highAcuracy</code> <code>{boolean=}</code> 是否使用高精度</li>
<li><code>timeout</code> <code>{number=}</code> 超时时长,单位毫秒</li>
<li><code>age</code> <code>{number=}</code> 数据缓存时间,单位毫秒,为<code>0</code>时每次都执行新的检索 </li>
</ul>
</li>
</ul>
<h4 id="-clear(_watchId_)">.clear( watchId )</h4>
<p>停止指定的位置监控。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> watchId = Geo.watch( ... );</div><div class="line">Geo.clear( watchId );</div></pre></td></tr></table></figure>

<ul>
<li><code>watchId</code> <code>{number}</code> <code>watch</code>方法返回的<code>watchId</code></li>
</ul>
<h3 id="IP">IP</h3>
<p><code>在线IP查询服务</code>的扩展支持，需以 <code>require( &#39;saber-geo/ip&#39; )</code> 引入。</p>
<h3 id="-callback">.callback</h3>
<p>查询请求(<code>JSOP</code>)附带的<code>callback</code>参数的<code>键值</code>，默认为<code>callback</code></p>
<h3 id="-provider">.provider</h3>
<p>查询服务的<code>JSONP</code>服务地址，默认为<code>http://hendless.duapp.com/addr</code></p>
<h4 id="-find(_callback_)">.find( callback )</h4>
<p>查询当前<code>IP信息</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">require</span>( [ <span class="string">'saber-geo/ip'</span> ], <span class="function"><span class="keyword">function</span><span class="params">( IP )</span> </span>{</div><div class="line">	IP.find( <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>{</div><div class="line">    	<span class="built_in">console</span>.info( <span class="string">'IP Info: '</span>, <span class="built_in">arguments</span> );</div><div class="line">	});</div><div class="line">});</div></pre></td></tr></table></figure>

<p>===</p>
<p><a href="http://ecomfe.github.io/saber/" target="_blank" rel="external"><img src="https://f.cloud.github.com/assets/157338/1485433/aeb5c72a-4714-11e3-87ae-7ef8ae66e605.png" alt="Saber"></a></p>

</article>

    

</main>

        <footer>
    <p>&copy;2014 <a href="http://efe.baidu.com" target="_blank">Baidu EFE</a>.</p>
</footer>

        <script src="/saber/js/master.js" type="text/javascript"></script>


    </body>
</html>
